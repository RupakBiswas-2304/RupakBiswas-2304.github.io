<!doctype html><html lang=en-us><head><title></title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><style>@import "https://fonts.googleapis.com/css2?family=Inconsolata&display=swap";:root{--cursor-visibility:hidden}html,body{width:100%;height:100%;overflow:auto;font-family:inconsolata,monospace;font-size:4vmin;line-height:4.1vmin;font-weight:400}body{margin:0;display:flex;flex-direction:row;justify-content:center;align-items:center}#content{min-width:82vmin;min-height:82vmin}::-webkit-scrollbar{width:10px}::-webkit-scrollbar-track{border-radius:10px;box-shadow:inset 0 0 1px white}::-webkit-scrollbar-thumb{border-radius:10px;box-shadow:0 0 0 1px white}.cursor,#activity-title:after,#activity-content:after,#cd:after,#whoami:after,#cat:after,#tree:after{visibility:var(--cursor-visibility);content:"|";overflow:hidden;color:#fff;animation:blink 500ms linear infinite alternate}@keyframes blink{0%{opacity:0}100%{opacity:1}}@media only screen and (min-width:768px){body{font-size:2.5vmin;line-height:2.6vmin}#content{min-width:60vmin}}:root{--cursor-visibility:hidden}body{align-items:unset;overflow-y:scroll}#content{max-width:80vmin}pre{background:#161616cf;padding:5px;border:1px solid}@keyframes blink{0%{opacity:0}100%{opacity:1}}body{background:#1b1d1e}body #terminal{color:#bbb}body #user{color:#23e298}body #dir{color:#d08010}body .Typewriter__cursor{color:#bbb}a{color:#bbb}.navFull{background-color:#353535;font-family:courier new;font-size:17px;display:inline;position:fixed;bottom:0;left:0;width:100%;padding-top:5px;padding:10px;padding-bottom:0}.navCredits{float:right;padding-right:18px;padding-bottom:10px;padding-top:5px}#content::after{content:"\a\a";white-space:pre}</style></head><body><div id=content><span id=activity-title></span><br><span id=activity-content></span><br><script type=text/javascript>async function typewriter(e,t,n){var s=0,o=!1;addText="";const i=document.getElementById(t),a=()=>new Promise(e=>setTimeout(e,n)),r=()=>new Promise(e=>e()),c=()=>i.innerHTML=e.slice(0,s+1)+addText,l=document.createElement("span");for(l.id="blink",i.style.setProperty("--cursor-visibility","visible");s<e.length;){if(e.charAt(s+1)==="<"&&(o=!0),e.charAt(s+1)===">"&&(o=!1),o){s++;continue}requestAnimationFrame(c),n===0?await r():await a(),s++}i.style.setProperty("--cursor-visibility","collapse")}function parseDelay(e){const t=parseInt(e,10);return isNaN(t)?0:t}const titleDelay=parseDelay("0"),contentDelay=parseDelay("0"),typeeffetct=async()=>{await typewriter("\u003cspan id=\u0027terminal\u0027\u003e\u003ch1 id=\u0027title\u0027\u003e\u003c/h1\u003e\u003c/span\u003e","activity-title",titleDelay),await typewriter(`\u003cspan id=\u0027terminal\u0027\u003e\u003ch1 id=\u0022handwritten-digit-recognition\u0022\u003eHandwritten Digit Recognition\u003c/h1\u003e
\u003cp\u003eThe goal of the project is to implement CNN based digit-recognition system in a edge and resource constrained device. More specifically, I used a esp32-cam module, which have 2mp camera, 512kb RAM and 4Mb flash memory. My object is to capture image in a loop, crop that image, send to the cnn model’s input tensor, run the model ( invoke ) and output the result based on maximum probability returned\u003c/p\u003e
\u003ch3 id=\u0022install-the-esp-idf\u0022\u003eInstall the ESP IDF\u003c/h3\u003e
\u003cul\u003e
\u003cli\u003eGuide : \u003ca href=\u0022https://rupakbiswas-2304.github.io/esp32/installation/\u0022\u003ehttps://rupakbiswas-2304.github.io/esp32/installation/\u003c/a\u003e\u003c/li\u003e
\u003c/ul\u003e
\u003ch3 id=\u0022file-structure\u0022\u003eFile Structure:\u003c/h3\u003e
\u003cul\u003e
\u003cli\u003emain.cc : main file that runs\u003c/li\u003e
\u003cli\u003emodel_data.h : contains the model’s input and output tensor\u003c/li\u003e
\u003cli\u003emodel_data_archive.h : contains the old model’s weights and bias ( not used )\u003c/li\u003e
\u003cli\u003eCMakeLists.txt : cmake file to build the project\u003c/li\u003e
\u003cli\u003eMakefile : make file to build the project\u003c/li\u003e
\u003cli\u003eREADME.md : this file\u003c/li\u003e
\u003cli\u003eimage_provider.h : contains the image provider function definition\u003c/li\u003e
\u003cli\u003eimage_provider.cc : contains the image provider function implementation\u003c/li\u003e
\u003c/ul\u003e
\u003ch3 id=\u0022dependencies\u0022\u003eDependencies\u003c/h3\u003e
\u003cul\u003e
\u003cli\u003eIDF\u003c/li\u003e
\u003cli\u003eESP32-CAM\u003c/li\u003e
\u003cli\u003eESP32-CAM Arduino Library\u003c/li\u003e
\u003cli\u003eTensorflow Lite for Microcontrollers\u003c/li\u003e
\u003cli\u003eTensorflow\u003c/li\u003e
\u003cli\u003eMatplotlib\u003c/li\u003e
\u003c/ul\u003e
\u003ch3 id=\u0022building-the-model\u0022\u003eBuilding the Model\u003c/h3\u003e
\u003cul\u003e
\u003cli\u003eGoto the python folder\u003c/li\u003e
\u003cli\u003erun the main.py file\u003c/li\u003e
\u003cli\u003eIt will download the mnist dataset and train the model\u003c/li\u003e
\u003cli\u003eIt will save the model in the models folder\u003c/li\u003e
\u003cli\u003eNext for converting the model, run the convert_lite.py file\u003c/li\u003e
\u003cli\u003eIt will convert the model to tflite format\u003c/li\u003e
\u003cli\u003eFor testing the file, run \u003ccode\u003epython test.py\u003c/code\u003e\u003c/li\u003e
\u003c/ul\u003e
\u003ch3 id=\u0022load-and-run-the-example\u0022\u003eLoad and run the example\u003c/h3\u003e
\u003cp\u003eTo flash (replace \u003ccode\u003e/dev/ttyUSB0\u003c/code\u003e with the device serial port):\u003c/p\u003e
\u003cpre tabindex=\u00220\u0022\u003e\u003ccode\u003eidf.py --port /dev/ttyUSB0 flash
\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eMonitor the serial output:\u003c/p\u003e
\u003cpre tabindex=\u00220\u0022\u003e\u003ccode\u003eidf.py --port /dev/ttyUSB0 monitor
\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eUse \u003ccode\u003eCtrl\u002b]\u003c/code\u003e to exit.\u003c/p\u003e
\u003cp\u003eThe previous two commands can be combined:\u003c/p\u003e
\u003cpre tabindex=\u00220\u0022\u003e\u003ccode\u003eidf.py --port /dev/ttyUSB0 flash monitor
\u003c/code\u003e\u003c/pre\u003e\u003ch3 id=\u0022some-output-dump\u0022\u003eSome Output Dump\u003c/h3\u003e
\u003cpre\u003e\u003ccode\u003eGetting image...
Image Captured ... Image Size: 320 x 240
Printing Image 
-89 -88 -90 -88 -90 -85 -83 -90 -88 -86 -84 -85 -88 -85 -87 -84 -84 -86 -88 -85 -83 -86 -86 -85 -83 -85 -84 -89 
-92 -92 -90 -92 -93 -91 -88 -87 -99 -92 -93 -93 -93 -93 -95 -93 -91 -91 -90 -94 -90 -89 -94 -95 -93 -94 -95 -96 
-88 -89 -87 -93 -91 -91 -98 -91 -92 -91 -92 -94 -93 -93 -91 -91 -92 -92 -93 -96 -92 -93 -94 -85 -89 -92 -93 -92 
-91 -89 -89 -96 -92 -89 -96 -82 -90 -91 -94 -92 -92 -93 -90 -89 -93 -87 -93 -92 -87 -96 -94 -90 -93 -94 -92 -91 
-93 -85 -79 -94 -93 -94 -92 -86 -85 -92 -92 -90 -90 -94 -92 -90 -92 -95 -94 -92 -96 -85 -91 -94 -94 -92 -94 -89 
-94 -90 -86 -91 -93 -92 -93 -93 -83 -90 -89 -91 -93 -93 -92 -90 -91 -95 -94 -95 -96 -83 -92 -91 -93 -92 -93 -91 
-94 -91 -89 -90 -93 -89 -92 -93 -89 -94 -92 -89 -92 -91 -91 -89 -87 -95 -93 -92 -95 -93 -94 -92 -91 -95 -95 -93 
-92 -93 -92 -92 -91 -90 -90 -92 -92 -94 -92 -87 -91 -91 -89 -94 -95 -93 -93 -92 -95 -92 -92 -90 -91 -94 -96 -91 
-91 -88 -90 -91 -92 -91 -94 -94 -94 -95 -89 -84 -91 -94 -97 -94 -95 -82 -89 -93 -92 -93 -94 -92 -95 -95 -94 -90 
-96 -88 -88 -90 -91 -92 -91 -91 -92 -93 -88 -90 -89 -93 -82 -82 -89 -88 -88 -92 -92 -94 -93 -92 -94 -94 -93 -90 
-97 -93 -92 -92 -90 -90 -93 -92 -92 -98 -92 -92 -92 -95 -95 -90 -92 -91 -92 -90 -91 -94 -93 -93 -92 -94 -94 -98 
-93 -89 -91 -92 -91 -90 -92 -93 -93 -94 -94 -93 -94 -93 -94 -94 -93 -94 -93 -92 -91 -93 -94 -92 -92 -94 -93 -97 
-92 -91 -93 -89 -91 -91 -92 -93 -92 -93 -90 -91 -94 -93 -94 -94 -94 -93 -93 -94 -92 -93 -93 -92 -92 -92 -91 -92 
-92 -91 -93 -94 -91 -92 -93 -95 -92 -93 -90 -89 -92 -92 -92 -93 -94 -91 -91 -93 -94 -93 -89 -88 -93 -89 -89 -88 
-90 -90 -91 -92 -92 -90 -91 -91 -93 -93 -93 -93 -95 -92 -93 -92 -91 -92 -93 -91 -92 -93 -90 -92 -88 -90 -94 -93 
-95 -91 -90 -91 -91 -90 -91 -93 -93 -93 -91 -92 -91 -90 -94 -92 -88 -86 -92 -87 -91 -93 -90 -89 -90 -92 -92 -87 
-95 -93 -93 -93 -92 -93 -93 -94 -93 -94 -91 -91 -86 -84 -93 -90 -88 -87 -91 -92 -93 -93 -91 -92 -92 -93 -91 -86 
-88 -88 -90 -94 -92 -89 -90 -91 -91 -94 -90 -89 -89 -93 -93 -90 -90 -89 -91 -93 -93 -84 -90 -91 -91 -93 -91 -87 
-85 -90 -89 -95 -92 -91 -89 -90 -91 -93 -89 -88 -88 -88 -90 -90 -88 -88 -91 -82 -89 -88 -88 -86 -88 -91 -90 -96 
-89 -76 -90 -89 -91 -90 -93 -93 -92 -91 -90 -90 -88 -88 -87 -92 -91 -90 -92 -89 -92 -91 -91 -89 -88 -88 -89 -95 
-88 -90 -91 -90 -90 -91 -89 -85 -92 -84 -86 -89 -92 -86 -95 -96 -92 -92 -92 -92 -91 -89 -89 -89 -96 -89 -87 -93 
-96 -94 -89 -88 -91 -91 -94 -88 -85 -83 -89 -90 -91 -89 -90 -88 -91 -91 -90 -89 -90 -92 -91 -92 -92 -91 -88 -91 
-92 -91 -92 -88 -92 -93 -87 -88 -90 -92 -89 -88 -89 -91 -91 -90 -90 -87 -91 -88 -91 -92 -90 -89 -91 -90 -92 -90 
-91 -92 -93 -93 -92 -91 -90 -88 -84 -92 -89 -82 -91 -89 -91 -89 -88 -84 -90 -88 -90 -90 -89 -87 -90 -92 -92 -89 
-95 -82 -93 -90 -88 -85 -89 -87 -86 -96 -88 -87 -87 -90 -90 -87 -81 -92 -87 -90 -92 -91 -89 -89 -91 -94 -88 -90 
-93 -90 -90 -87 -87 -87 -90 -88 -89 -93 -88 -86 -80 -87 -85 -88 -91 -91 -91 -90 -87 -86 -88 -85 -90 -88 -86 -90 
-91 -91 -91 -88 -81 -86 -91 -91 -82 -90 -88 -87 -85 -87 -86 -92 -88 -89 -90 -89 -88 -93 -88 -87 -88 -87 -87 -88 
-91 -92 -91 -88 -86 -85 -87 -86 -84 -92 -86 -86 -82 -88 -86 -86 -85 -88 -89 -88 -89 -90 -90 -90 -88 -83 -87 -93 

Quantized !
Number of Elements = 10 
prediction = 7
\u003c/code\u003e\u003c/pre\u003e
\u003c/span\u003e`,"activity-content",contentDelay)};typeeffetct()</script></div><span class=navFull><span><a href=/>Home</a>
<span>&#8192;|&#8192;</span>
<a href=./..>/projects/</a></span>
<span class=navCredits><a href=https://github.com/RupakBiswas-2304 target=_blank rel=noopener>Github</a></span></span></body></html>